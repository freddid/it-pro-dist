import{a0 as o,Z as r}from"./entry.6b512049.js";const p=o("DataStore",{state:()=>({news:[],users:[],gallery:{2022:["https://picsum.photos/seed/fred1/1700/900","https://picsum.photos/seed/fred2/1920/1200","https://picsum.photos/seed/fred3/1560/900","https://picsum.photos/seed/fred4/1440/1000","https://picsum.photos/seed/fred5/1920/1080","https://picsum.photos/seed/fred6/1200/800","https://picsum.photos/seed/fred7/1600/800"],2021:["https://picsum.photos/seed/fred8/1700/900","https://picsum.photos/seed/fred9/1920/1200","https://picsum.photos/seed/fre1/1560/900","https://picsum.photos/seed/fre2/1440/1000","https://picsum.photos/seed/fre3/1920/1080","https://picsum.photos/seed/fre4/1200/800","https://picsum.photos/seed/fre5/1600/800"],2020:["https://picsum.photos/1700/900","https://picsum.photos/1920/1200","https://picsum.photos/1560/900","https://picsum.photos/1440/1000","https://picsum.photos/1920/1080","https://picsum.photos/1200/800","https://picsum.photos/1600/800"]},date:"",baseUrl:"https://itpro-gstou.ru"}),actions:{async getNews(){try{this.news=await(await fetch(`${this.baseUrl}/api/getNews`)).json()}catch(t){alert(t)}},async changeNews({data:t,url:s}){try{if(t[1]){const e=new FormData;e.append("img",t[1]);const a=await fetch(`${this.baseUrl}/api/upload`,{method:"POST",body:e});t[0].img=(await a.json()).imgPath}t[0].token=sessionStorage.getItem("token"),await fetch(`${this.baseUrl}/api/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t[0])}),this.getNews()}catch(e){alert(e)}},async getDate(){try{this.date=(await(await fetch(`${this.baseUrl}/api/getTime`)).json()).endDate}catch(t){alert(t)}},async addDate(t){try{const s=await fetch(`${this.baseUrl}/api/chooseTime`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:t,token:sessionStorage.getItem("token")})}),{msg:e}=await s.json();e=="\u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0430"&&(alert(e),this.date=t)}catch(s){alert(s)}},async getUsers(){try{this.users=await(await fetch(`${this.baseUrl}/api/getUsers`)).json()}catch(t){alert(t)}},async addUser(t){try{return await fetch(`${this.baseUrl}/api/addUser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(s){alert(s)}},async authSystem(t){try{const e=await(await fetch(`${this.baseUrl}/api/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();e.hash?(sessionStorage.setItem("token",e.hash),await r("/admin")):alert("\u041F\u0430\u0440\u043E\u043B\u044C \u0438\u043B\u0438 \u043B\u043E\u0433\u0438\u043D \u043D\u0435 \u043F\u0440\u0430\u0432\u0435\u043B\u044C\u043D\u044B\u0439")}catch(s){alert(s)}}},getters:{getNewsObj:t=>t.news}});export{p as u};
